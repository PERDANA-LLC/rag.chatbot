---
phase: 2
plan: 2
wave: 1
depends_on: []
files_modified:
  - lib/ai/firecrawl.ts
  - .env.local
autonomous: true
user_setup:
  - service: firecrawl
    why: "Web crawling to Markdown"
    env_vars:
      - name: FIRECRAWL_API_KEY
        source: "Firecrawl.dev Dashboard"

must_haves:
  truths:
    - "Can crawl URL and get Markdown"
  artifacts:
    - "lib/ai/firecrawl.ts exists"
---

# Plan 2.2: Firecrawl Integration

<objective>
Implement the Firecrawl service wrapper in `lib/ai/firecrawl.ts`.
Functionality: Crawl a website URL and return clean Markdown content for ingestion.

Purpose: specific instructions to turn websites into RAG documents.
Output: specific instructions to working Firecrawl wrapper.
</objective>

<context>
Load for context:
- .gsd/SPEC.md
</context>

<tasks>

<task type="auto">
  <name>Create Firecrawl Service</name>
  <files>lib/ai/firecrawl.ts</files>
  <action>
    Implement `crawlWebsite(url: string)`:
    - POST to `https://api.firecrawl.dev/v0/crawl`
    - Poll for status / get result.
    - Return list of `{ url, markdown }`.
    
    Use `fetch` directly (no SDK needed unless preferred).
  </action>
  <verify>ls lib/ai/firecrawl.ts</verify>
  <done>Service wrapper implemented</done>
</task>

</tasks>

<verification>
After all tasks, verify:
- [ ] Logic compiles
- [ ] Environment variable placeholder exists
</verification>
